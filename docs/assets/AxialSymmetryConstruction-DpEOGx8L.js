import{r as w,j as V,A as Qe}from"./index-f4ndBCHf.js";import{u as _e}from"./slider-CMbdbvLS.js";import{C as Me}from"./ConstructionControlPanel-CT8jyKdn.js";import"./rotate-ccw-A21KN-ic.js";function on({onBack:Re,darkMode:d,onDarkModeChange:Ce}){const le=_e(),D=w.useRef(null),A=w.useRef(null),K=w.useRef(null),te=w.useRef(),[N,Te]=w.useState(0),[W,oe]=w.useState(le?.15:.5),[j,q]=w.useState({x:0,y:0}),[se,Q]=w.useState(!1),[_,ue]=w.useState({x:0,y:0}),[S,ze]=w.useState({width:1920,height:1080}),[J,ie]=w.useState(0),[ce,M]=w.useState(!0),[$,Ye]=w.useState(!0),[E,he]=w.useState({x:600,y:700}),[L,fe]=w.useState({x:1100,y:900}),[k,de]=w.useState({x:800,y:400}),[F,B]=w.useState(null),[ye,p]=w.useState(null),[ge,Ie]=w.useState(!1),l=1400,[We,me]=w.useState(!1),[je,Xe]=w.useState(0),[Ae,De]=w.useState(1),[x,Ee]=w.useState({x:0,y:0});w.useEffect(()=>{A.current||(A.current=document.createElement("canvas"))},[]);const ee=w.useRef(null),[pe,Le]=w.useState(!1);w.useEffect(()=>{const e=new Image;e.crossOrigin="anonymous",e.onload=()=>{ee.current=e,Le(!0)},e.onerror=()=>{console.error("Failed to load ruler image")},e.src="https://jjpiguuubvmiobmixwgh.supabase.co/storage/v1/object/public/Admin%20math/pravitko4.svg"},[]);const re=w.useRef(null),[ke,Ne]=w.useState(!1);w.useEffect(()=>{const e=new Image;e.crossOrigin="anonymous",e.onload=()=>{re.current=e,Ne(!0)},e.onerror=()=>{console.error("Failed to load compass image")},e.src="https://jjpiguuubvmiobmixwgh.supabase.co/storage/v1/object/public/Admin%20math/kruzitko.svg"},[]);const O=(e,i)=>({x:(e-j.x)/W,y:(i-j.y)/W}),H=(e,i,a=15)=>{const n=e.x-i.x,t=e.y-i.y;return Math.sqrt(n*n+t*t)<a},Z=(e,i,a)=>{const n=e.x*W+j.x,t=e.y*W+j.y,o=n+a.x,c=t+a.y,m=20,v=i.x-o,r=i.y-(c-8);return Math.sqrt(v*v+r*r)<m},ve=()=>{if(!S.width||!S.height)return;const e=S.width/2,i=S.height/2,a=(E.y+L.y+k.y)/3;q({x:e-l*W,y:i-a*W})};w.useEffect(()=>{const e=()=>{K.current&&ze({width:K.current.clientWidth,height:K.current.clientHeight})};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),w.useEffect(()=>{S.width>0&&S.height>0&&(ve(),ge||Ie(!0))},[S.width,S.height,ge]),w.useEffect(()=>{const e=D.current,i=A.current;if(!e||!i)return;const a=window.devicePixelRatio||1;e.width=S.width*a,e.height=S.height*a,i.width=S.width*a,i.height=S.height*a},[S]),w.useEffect(()=>{if(!ce)return;const e=()=>{ie(i=>i>=1?(M(!1),1):Math.min(i+.008,1))};return J<1?te.current=requestAnimationFrame(e):J>=1&&M(!1),()=>{te.current&&cancelAnimationFrame(te.current)}},[ce,J,N]);const He=e=>{e.strokeStyle=d?"rgba(31, 41, 55, 0.3)":"rgba(229, 231, 235, 0.5)",e.lineWidth=1;for(let a=0;a<=S.width;a+=20)e.beginPath(),e.moveTo(a,0),e.lineTo(a,S.height),e.stroke();for(let a=0;a<=S.height;a+=20)e.beginPath(),e.moveTo(0,a),e.lineTo(S.width,a),e.stroke()},h=(e,i,a,n="#000",t=12,o=-12,c=1)=>{e.save(),e.setTransform(c,0,0,c,0,0);const m=i.x*W+j.x,v=i.y*W+j.y;e.font="600 22px Arial, sans-serif";const s=e.measureText(a).width,b=m+t+s/2,f=v+o-8,y=Math.max(s,16)/2+6;e.fillStyle=d?"rgba(55, 65, 81, 0.5)":"rgba(200, 200, 200, 0.35)",e.beginPath(),e.arc(b,f,y,0,Math.PI*2),e.fill(),e.fillStyle=n,e.fillText(a,m+t,v+o),e.restore()},g=(e,i,a,n="#000")=>{e.fillStyle=d?"rgba(75, 85, 99, 0.4)":"rgba(200, 200, 200, 0.3)",e.beginPath(),e.arc(i.x,i.y,10,0,Math.PI*2),e.fill(),e.fillStyle=n,e.beginPath(),e.arc(i.x,i.y,7,0,Math.PI*2),e.fill(),e.strokeStyle=d?"#111827":"#ffffff",e.lineWidth=2,e.beginPath(),e.arc(i.x,i.y,7,0,Math.PI*2),e.stroke()},u=(e,i,a,n="#000",t=2,o=1,c=!1)=>{let m=0;o<=.15?m=0:o>=.85?m=1:m=(o-.15)/.7;const v={x:i.x+(a.x-i.x)*m,y:i.y+(a.y-i.y)*m},r=m<1;c&&r&&m>0&&(e.strokeStyle="rgba(251, 191, 36, 0.5)",e.lineWidth=t*10,e.lineCap="round",e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(v.x,v.y),e.stroke()),e.strokeStyle=n,e.lineWidth=r&&c?t*1.5:t,e.lineCap="round",e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(v.x,v.y),e.stroke()},ae=(e,i,a,n,t)=>{if(!$||!t)return;let o=0;if(n<.15)o=n/.15;else if(n>=.15&&n<=.85)o=1;else if(n>.85&&n<1)o=(1-n)/.15;else return;const c=800,m=400;e.save();const v=Math.atan2(a.y-i.y,a.x-i.x),r=(i.x+a.x)/2,s=(i.y+a.y)/2;e.translate(r,s),e.rotate(v),e.globalAlpha=o,e.drawImage(t,-c/2,-m/2,c,m),e.restore()},U=(e,i,a,n,t)=>{if(!$||!ke||!re.current)return;let o=0;if(n<.15)o=n/.15;else if(n>=.15&&n<=.85)o=1;else if(n>.85&&n<1)o=(1-n)/.15;else return;const c=re.current,m=a,v=a;e.save(),e.translate(i.x,i.y),e.rotate(t),e.globalAlpha=o,e.drawImage(c,0,-v,m,v),e.restore()},G=[{id:0,title:"Zadání úlohy",description:"Máme trojúhelník ABC a osu souměrnosti x. Najdeme obraz trojúhelníku v osové souměrnosti. Body můžeš přesouvat myší!",draw:(e,i,a,n,t,o,c,m,v)=>{const r=window.devicePixelRatio||1,s=d?"#e5e7eb":"#1f2937",b=d?"#fca5a5":"#ef4444";e.strokeStyle=b,e.lineWidth=5,e.lineCap="butt",e.beginPath(),e.moveTo(l,-5e3),e.lineTo(l,5e3),e.stroke(),h(e,{x:l,y:200},"x",b,15,0,r),u(e,n,t,s,4),u(e,t,o,s,4),u(e,o,n,s,4),g(e,n,"A",s),g(e,t,"B",s),g(e,o,"C",s),h(e,n,"A",s,-25,-12,r),h(e,t,"B",s,12,12,r),h(e,o,"C",s,-25,-12,r)}},{id:1,title:"Narýsuj kolmici od bodu A",description:"Od bodu A narýsuj vodorovnou čáru kolmou na osu x.",draw:(e,i,a,n,t,o,c,m,v)=>{const r=window.devicePixelRatio||1,s=d?"#e5e7eb":"#1f2937",b=d?"#fca5a5":"#ef4444",f=d?"#4ade80":"#22c55e";e.strokeStyle=b,e.lineWidth=5,e.lineCap="butt",e.beginPath(),e.moveTo(l,-5e3),e.lineTo(l,5e3),e.stroke(),h(e,{x:l,y:200},"x",b,15,0,r),u(e,n,t,s,4,1,!1),u(e,t,o,s,4,1,!1),u(e,o,n,s,4,1,!1);const y={x:5e3,y:n.y};u(e,n,y,f,3,c,!0);const P=n.y-200,R={x:l-400,y:P},C={x:l+400,y:P};ae(e,R,C,c,ee.current),g(e,n,"A",s),g(e,t,"B",s),g(e,o,"C",s),h(e,n,"A",s,-25,-12,r),h(e,t,"B",s,12,12,r),h(e,o,"C",s,-25,-12,r)}},{id:2,title:"Narýsuj kolmici od bodu B",description:"Od bodu B narýsuj vodorovnou čáru kolmou na osu x.",draw:(e,i,a,n,t,o,c,m,v)=>{const r=window.devicePixelRatio||1,s=d?"#e5e7eb":"#1f2937",b=d?"#fca5a5":"#ef4444",f=d?"#4ade80":"#22c55e";e.strokeStyle=b,e.lineWidth=5,e.lineCap="butt",e.beginPath(),e.moveTo(l,-5e3),e.lineTo(l,5e3),e.stroke(),h(e,{x:l,y:200},"x",b,15,0,r),u(e,n,t,s,4,1,!1),u(e,t,o,s,4,1,!1),u(e,o,n,s,4,1,!1);const y={x:5e3,y:n.y};u(e,n,y,f,3,1,!1);const P={x:5e3,y:t.y};u(e,t,P,f,3,c,!0);const R=t.y-200,C={x:l-400,y:R},T={x:l+400,y:R};ae(e,C,T,c,ee.current),g(e,n,"A",s),g(e,t,"B",s),g(e,o,"C",s),h(e,n,"A",s,-25,-12,r),h(e,t,"B",s,12,12,r),h(e,o,"C",s,-25,-12,r)}},{id:3,title:"Narýsuj kolmici od bodu C",description:"Od bodu C narýsuj vodorovnou čáru kolmou na osu x.",draw:(e,i,a,n,t,o,c,m,v)=>{const r=window.devicePixelRatio||1,s=d?"#e5e7eb":"#1f2937",b=d?"#fca5a5":"#ef4444",f=d?"#4ade80":"#22c55e";e.strokeStyle=b,e.lineWidth=5,e.lineCap="butt",e.beginPath(),e.moveTo(l,-5e3),e.lineTo(l,5e3),e.stroke(),h(e,{x:l,y:200},"x",b,15,0,r),u(e,n,t,s,4,1,!1),u(e,t,o,s,4,1,!1),u(e,o,n,s,4,1,!1);const y={x:5e3,y:n.y};u(e,n,y,f,3,1,!1);const P={x:5e3,y:t.y};u(e,t,P,f,3,1,!1);const R={x:5e3,y:o.y};u(e,o,R,f,3,c,!0);const C=o.y-200,T={x:l-400,y:C},z={x:l+400,y:C};ae(e,T,z,c,ee.current),g(e,n,"A",s),g(e,t,"B",s),g(e,o,"C",s),h(e,n,"A",s,-25,-12,r),h(e,t,"B",s,12,12,r),h(e,o,"C",s,-25,-12,r)}},{id:4,title:"Změř vzdálenost bodu A od osy",description:"Nastav kružítko na vzdálenost od bodu A k ose x.",draw:(e,i,a,n,t,o,c,m,v)=>{const r=window.devicePixelRatio||1,s=d?"#e5e7eb":"#1f2937",b=d?"#fca5a5":"#ef4444",f=d?"#4ade80":"#22c55e";e.strokeStyle=b,e.lineWidth=5,e.lineCap="butt",e.beginPath(),e.moveTo(l,-5e3),e.lineTo(l,5e3),e.stroke(),h(e,{x:l,y:200},"x",b,15,0,r),u(e,n,t,s,4,1,!1),u(e,t,o,s,4,1,!1),u(e,o,n,s,4,1,!1);const y={x:5e3,y:n.y};u(e,n,y,f,3,1,!1);const P={x:5e3,y:t.y};u(e,t,P,f,3,1,!1);const R={x:5e3,y:o.y};u(e,o,R,f,3,1,!1);const C={x:l,y:n.y},T=Math.abs(n.x-l),z=Math.atan2(C.y-n.y,C.x-n.x);U(e,n,T,c,z),g(e,n,"A",s),g(e,t,"B",s),g(e,o,"C",s),h(e,n,"A",s,-25,-12,r),h(e,t,"B",s,12,12,r),h(e,o,"C",s,-25,-12,r)}},{id:5,title:"Přenes vzdálenost a vytvoř bod A'",description:"Zapíchni kružítko do průsečíku na ose a přenes vzdálenost na druhou stranu. Vytvoř bod A'.",draw:(e,i,a,n,t,o,c,m,v)=>{const r=window.devicePixelRatio||1,s=d?"#e5e7eb":"#1f2937",b=d?"#fca5a5":"#ef4444",f=d?"#4ade80":"#22c55e",y=d?"#60a5fa":"#3b82f6";e.strokeStyle=b,e.lineWidth=5,e.lineCap="butt",e.beginPath(),e.moveTo(l,-5e3),e.lineTo(l,5e3),e.stroke(),h(e,{x:l,y:200},"x",b,15,0,r),u(e,n,t,s,4,1,!1),u(e,t,o,s,4,1,!1),u(e,o,n,s,4,1,!1);const P={x:5e3,y:n.y};u(e,n,P,f,3,1,!1);const R={x:5e3,y:t.y};u(e,t,R,f,3,1,!1);const C={x:5e3,y:o.y};u(e,o,C,f,3,1,!1);const T={x:l,y:n.y},z=Math.abs(n.x-l),I={x:l+(l-n.x),y:n.y},Y=Math.atan2(I.y-T.y,I.x-T.x);U(e,T,z,c,Y),g(e,n,"A",s),g(e,t,"B",s),g(e,o,"C",s),c>.5&&g(e,I,"A'",y),h(e,n,"A",s,-25,-12,r),h(e,t,"B",s,12,12,r),h(e,o,"C",s,-25,-12,r),c>.5&&h(e,I,"A'",y,12,-12,r)}},{id:6,title:"Změř vzdálenost bodu B od osy",description:"Nastav kružítko na vzdálenost od bodu B k ose x.",draw:(e,i,a,n,t,o,c,m,v)=>{const r=window.devicePixelRatio||1,s=d?"#e5e7eb":"#1f2937",b=d?"#fca5a5":"#ef4444",f=d?"#4ade80":"#22c55e",y=d?"#60a5fa":"#3b82f6";e.strokeStyle=b,e.lineWidth=5,e.lineCap="butt",e.beginPath(),e.moveTo(l,-5e3),e.lineTo(l,5e3),e.stroke(),h(e,{x:l,y:200},"x",b,15,0,r),u(e,n,t,s,4,1,!1),u(e,t,o,s,4,1,!1),u(e,o,n,s,4,1,!1);const P={x:5e3,y:n.y};u(e,n,P,f,3,1,!1);const R={x:5e3,y:t.y};u(e,t,R,f,3,1,!1);const C={x:5e3,y:o.y};u(e,o,C,f,3,1,!1);const T={x:l+(l-n.x),y:n.y};g(e,T,"A'",y);const z={x:l,y:t.y},I=Math.abs(t.x-l),Y=Math.atan2(z.y-t.y,z.x-t.x);U(e,t,I,c,Y),g(e,n,"A",s),g(e,t,"B",s),g(e,o,"C",s),h(e,n,"A",s,-25,-12,r),h(e,t,"B",s,12,12,r),h(e,o,"C",s,-25,-12,r),h(e,T,"A'",y,12,-12,r)}},{id:7,title:"Přenes vzdálenost a vytvoř bod B'",description:"Zapíchni kružítko do průsečíku na ose a přenes vzdálenost na druhou stranu. Vytvoř bod B'.",draw:(e,i,a,n,t,o,c,m,v)=>{const r=window.devicePixelRatio||1,s=d?"#e5e7eb":"#1f2937",b=d?"#fca5a5":"#ef4444",f=d?"#4ade80":"#22c55e",y=d?"#60a5fa":"#3b82f6";e.strokeStyle=b,e.lineWidth=5,e.lineCap="butt",e.beginPath(),e.moveTo(l,-5e3),e.lineTo(l,5e3),e.stroke(),h(e,{x:l,y:200},"x",b,15,0,r),u(e,n,t,s,4,1,!1),u(e,t,o,s,4,1,!1),u(e,o,n,s,4,1,!1);const P={x:5e3,y:n.y};u(e,n,P,f,3,1,!1);const R={x:5e3,y:t.y};u(e,t,R,f,3,1,!1);const C={x:5e3,y:o.y};u(e,o,C,f,3,1,!1);const T={x:l+(l-n.x),y:n.y};g(e,T,"A'",b);const z={x:l,y:t.y},I=Math.abs(t.x-l),Y={x:l+(l-t.x),y:t.y},X=Math.atan2(Y.y-z.y,Y.x-z.x);U(e,z,I,c,X),c>.5&&g(e,Y,"B'",y),g(e,n,"A",s),g(e,t,"B",s),g(e,o,"C",s),h(e,n,"A",s,-25,-12,r),h(e,t,"B",s,12,12,r),h(e,o,"C",s,-25,-12,r),h(e,T,"A'",y,12,-12,r),c>.5&&h(e,Y,"B'",y,12,-12,r)}},{id:8,title:"Změř vzdálenost bodu C od osy",description:"Nastav kružítko na vzdálenost od bodu C k ose x.",draw:(e,i,a,n,t,o,c,m,v)=>{const r=window.devicePixelRatio||1,s=d?"#e5e7eb":"#1f2937",b=d?"#fca5a5":"#ef4444",f=d?"#4ade80":"#22c55e",y=d?"#60a5fa":"#3b82f6";e.strokeStyle=b,e.lineWidth=5,e.lineCap="butt",e.beginPath(),e.moveTo(l,-5e3),e.lineTo(l,5e3),e.stroke(),h(e,{x:l,y:200},"x",b,15,0,r),u(e,n,t,s,4,1,!1),u(e,t,o,s,4,1,!1),u(e,o,n,s,4,1,!1);const P={x:5e3,y:n.y};u(e,n,P,f,3,1,!1);const R={x:5e3,y:t.y};u(e,t,R,f,3,1,!1);const C={x:5e3,y:o.y};u(e,o,C,f,3,1,!1);const T={x:l+(l-n.x),y:n.y},z={x:l+(l-t.x),y:t.y};g(e,T,"A'",y),g(e,z,"B'",y);const I={x:l,y:o.y},Y=Math.abs(o.x-l),X=Math.atan2(I.y-o.y,I.x-o.x);U(e,o,Y,c,X),g(e,n,"A",s),g(e,t,"B",s),g(e,o,"C",s),h(e,n,"A",s,-25,-12,r),h(e,t,"B",s,12,12,r),h(e,o,"C",s,-25,-12,r),h(e,T,"A'",y,12,-12,r),h(e,z,"B'",y,12,-12,r)}},{id:9,title:"Přenes vzdálenost a vytvoř bod C'",description:"Zapíchni kružítko do průsečíku na ose a přenes vzdálenost na druhou stranu. Vytvoř bod C'.",draw:(e,i,a,n,t,o,c,m,v)=>{const r=window.devicePixelRatio||1,s=d?"#e5e7eb":"#1f2937",b=d?"#fca5a5":"#ef4444",f=d?"#4ade80":"#22c55e",y=d?"#60a5fa":"#3b82f6";e.strokeStyle=b,e.lineWidth=5,e.lineCap="butt",e.beginPath(),e.moveTo(l,-5e3),e.lineTo(l,5e3),e.stroke(),h(e,{x:l,y:200},"x",b,15,0,r),u(e,n,t,s,4,1,!1),u(e,t,o,s,4,1,!1),u(e,o,n,s,4,1,!1);const P={x:5e3,y:n.y};u(e,n,P,f,3,1,!1);const R={x:5e3,y:t.y};u(e,t,R,f,3,1,!1);const C={x:5e3,y:o.y};u(e,o,C,f,3,1,!1);const T={x:l+(l-n.x),y:n.y},z={x:l+(l-t.x),y:t.y};g(e,T,"A'",y),g(e,z,"B'",y);const I={x:l,y:o.y},Y=Math.abs(o.x-l),X={x:l+(l-o.x),y:o.y},ne=Math.atan2(X.y-I.y,X.x-I.x);U(e,I,Y,c,ne),g(e,n,"A",s),g(e,t,"B",s),g(e,o,"C",s),c>.5&&g(e,X,"C'",y),h(e,n,"A",s,-25,-12,r),h(e,t,"B",s,12,12,r),h(e,o,"C",s,-25,-12,r),h(e,T,"A'",y,12,-12,r),h(e,z,"B'",y,12,-12,r),c>.5&&h(e,X,"C'",y,12,-12,r)}},{id:10,title:"Spoj body A'B'C'",description:"Spoj body A', B' a C' a vznikne zrcadlený trojúhelník.",draw:(e,i,a,n,t,o,c,m,v)=>{const r=window.devicePixelRatio||1,s=d?"#e5e7eb":"#1f2937",b=d?"#fca5a5":"#ef4444",f=d?"#60a5fa":"#3b82f6";e.strokeStyle=b,e.lineWidth=5,e.lineCap="butt",e.beginPath(),e.moveTo(l,-5e3),e.lineTo(l,5e3),e.stroke(),h(e,{x:l,y:200},"x",b,15,0,r),u(e,n,t,s,4,1,!1),u(e,t,o,s,4,1,!1),u(e,o,n,s,4,1,!1);const y={x:l+(l-n.x),y:n.y},P={x:l+(l-t.x),y:t.y},R={x:l+(l-o.x),y:o.y};let C=0;c<.33?(C=c/.33,u(e,y,P,f,4,C,!0)):c<.66?(u(e,y,P,f,4,1,!1),C=(c-.33)/.33,u(e,P,R,f,4,C,!0)):(u(e,y,P,f,4,1,!1),u(e,P,R,f,4,1,!1),C=(c-.66)/.34,u(e,R,y,f,4,C,!0)),g(e,n,"A",s),g(e,t,"B",s),g(e,o,"C",s),g(e,y,"A'",f),g(e,P,"B'",f),g(e,R,"C'",f),h(e,n,"A",s,-25,-12,r),h(e,t,"B",s,12,12,r),h(e,o,"C",s,-25,-12,r),h(e,y,"A'",f,12,-12,r),h(e,P,"B'",f,12,-12,r),h(e,R,"C'",f,12,-12,r)}}],Ze=(e,i)=>{const a=window.devicePixelRatio||1;if(!(!A.current||A.current.width===0||A.current.height===0)){if(e.clearRect(0,0,A.current.width,A.current.height),e.save(),e.scale(a,a),He(e),$){const n=S.width<768;e.fillStyle=d?"#e5e7eb":"#1f2937",e.font=n?"600 20px Arial, sans-serif":"600 28px Arial, sans-serif",e.textAlign="center",e.fillText("Osově souměrný obraz",S.width/2,n?40:60),e.font=n?"400 13px Arial, sans-serif":"400 16px Arial, sans-serif";const t=G[N].description,c=e.measureText(t).width,m=n?18:22,v=n?12:16,r=n?180:120;if(n&&c>S.width-40){const s=S.width-40,b=t.split(" "),f=[];let y="";for(const Y of b){const X=y?`${y} ${Y}`:Y;e.measureText(X).width>s&&y?(f.push(y),y=Y):y=X}y&&f.push(y);const P=Math.max(...f.map(Y=>e.measureText(Y).width)),R=f.length*(m+4),C=S.width/2-P/2-v,T=S.height-r-R-v/2,z=P+v*2,I=R+v;e.fillStyle=d?"rgba(31, 41, 55, 0.95)":"rgba(255, 255, 255, 0.95)",e.beginPath(),e.roundRect(C,T,z,I,8),e.fill(),e.fillStyle=d?"#9ca3af":"#4b5563",f.forEach((Y,X)=>{const ne=S.height-r-R+X*(m+4)+m;e.fillText(Y,S.width/2,ne)})}else{const s=S.width/2-c/2-v,b=S.height-r-m-v/2,f=c+v*2,y=m+v;e.fillStyle=d?"rgba(31, 41, 55, 0.95)":"rgba(255, 255, 255, 0.95)",e.beginPath(),e.roundRect(s,b,f,y,8),e.fill(),e.fillStyle=d?"#9ca3af":"#4b5563",e.fillText(t,S.width/2,S.height-r)}e.textAlign="left"}e.translate(j.x,j.y),e.scale(W,W);for(let n=0;n<N;n++)G[n].draw(e,W,j,E,L,k,1,N,G[n].id);G[N].draw(e,W,j,E,L,k,i,N,G[N].id),e.restore()}},Be=()=>{if(!D.current||!A.current)return;const e=D.current,i=e.getContext("2d");if(!i)return;const a=A.current.getContext("2d");a&&Ze(a,J),i.clearRect(0,0,e.width,e.height),i.fillStyle=d?"#1f2937":"#ffffff",i.fillRect(0,0,e.width,e.height),i.drawImage(A.current,0,0)};w.useEffect(()=>{Be()},[J,N,W,j,d,$,S,E,L,k,ye]);const be=e=>{Te(e),ie(0),M(!0)},Fe=()=>{ie(0),M(!0)},Oe=()=>{be(0),ve()},Ve=e=>{const i=e[0]/100,a=D.current;if(!a)return;const n=a.getBoundingClientRect(),t=n.width/2,o=n.height/2,c=O(t,o);oe(i),q({x:t-c.x*i,y:o-c.y*i})},qe=e=>{const i=D.current?.getBoundingClientRect();if(!i)return;const a=e.clientX-i.left,n=e.clientY-i.top,t=O(a,n),o={x:a,y:n};if(H(E,t)||Z(E,o,{x:-25,y:-12})){B("A"),e.preventDefault();return}if(H(L,t)||Z(L,o,{x:12,y:12})){B("B"),e.preventDefault();return}if(H(k,t)||Z(k,o,{x:-25,y:-12})){B("C"),e.preventDefault();return}Q(!0),ue({x:e.clientX-j.x,y:e.clientY-j.y})},$e=e=>{const i=D.current?.getBoundingClientRect();if(!i)return;const a=e.clientX-i.left,n=e.clientY-i.top,t=O(a,n),o={x:a,y:n};if(F==="A"){he(t);return}if(F==="B"){fe(t);return}if(F==="C"){de(t);return}if(se){q({x:e.clientX-_.x,y:e.clientY-_.y});return}H(E,t)||Z(E,o,{x:-25,y:-12})?p("A"):H(L,t)||Z(L,o,{x:12,y:12})?p("B"):H(k,t)||Z(k,o,{x:-25,y:-12})?p("C"):p(null)},we=()=>{Q(!1),B(null)},Se=(e,i)=>{const a=e.clientX-i.clientX,n=e.clientY-i.clientY;return Math.sqrt(a*a+n*n)},Ue=(e,i)=>({x:(e.clientX+i.clientX)/2,y:(e.clientY+i.clientY)/2}),Ge=e=>{const i=D.current?.getBoundingClientRect();if(!i)return;if(e.touches.length===2){const m=Se(e.touches[0],e.touches[1]),v=Ue(e.touches[0],e.touches[1]);me(!0),Xe(m),De(W),Ee(v),e.preventDefault();return}if(e.touches.length!==1)return;const a=e.touches[0],n=a.clientX-i.left,t=a.clientY-i.top,o=O(n,t),c={x:n,y:t};if(H(E,o)||Z(E,c,{x:-25,y:-12})){B("A"),e.preventDefault();return}if(H(L,o)||Z(L,c,{x:12,y:12})){B("B"),e.preventDefault();return}if(H(k,o)||Z(k,c,{x:-25,y:-12})){B("C"),e.preventDefault();return}Q(!0),ue({x:a.clientX-j.x,y:a.clientY-j.y})},Je=e=>{const i=D.current?.getBoundingClientRect();if(!i)return;if(We&&e.touches.length===2){const c=Se(e.touches[0],e.touches[1]),m=Math.max(.15,Math.min(2.25,Ae*(c/je))),v=O(x.x,x.y);oe(m),q({x:x.x-v.x*m,y:x.y-v.y*m}),e.preventDefault();return}if(e.touches.length!==1)return;const a=e.touches[0],n=a.clientX-i.left,t=a.clientY-i.top,o=O(n,t);if(F==="A"){he(o),e.preventDefault();return}if(F==="B"){fe(o),e.preventDefault();return}if(F==="C"){de(o),e.preventDefault();return}se&&(q({x:a.clientX-_.x,y:a.clientY-_.y}),e.preventDefault())},Pe=()=>{Q(!1),B(null),me(!1)},Ke=e=>{e.preventDefault();const i=D.current?.getBoundingClientRect();if(!i)return;const a=e.clientX-i.left,n=e.clientY-i.top,t=O(a,n),o=e.deltaY>0?.9:1.1,c=Math.max(.15,Math.min(2.25,W*o));oe(c),q({x:a-t.x*c,y:n-t.y*c})};return V.jsxs("div",{className:"size-full flex flex-col relative",children:[V.jsx("div",{ref:K,className:`flex-1 ${d?"bg-[#111827]":"bg-[#f9fafb]"}`,children:V.jsx("canvas",{ref:D,className:"w-full h-full",style:{cursor:F?"grabbing":ye?"move":se?"grabbing":"grab",touchAction:"none"},onMouseDown:qe,onMouseMove:$e,onMouseUp:we,onMouseLeave:we,onTouchStart:Ge,onTouchMove:Je,onTouchEnd:Pe,onTouchCancel:Pe,onWheel:Ke})}),V.jsx(Me,{currentStep:N,totalSteps:G.length,scale:W,showCaptions:$,darkMode:d,isMobile:le,onStepChange:be,onPlayStep:Fe,onRestart:Oe,onZoomChange:Ve,onToggleCaptions:()=>Ye(!$),onToggleDarkMode:()=>Ce(!d)}),V.jsxs("button",{onClick:Re,className:`absolute top-4 left-4 z-10 flex items-center gap-2 px-3 py-2 rounded-lg shadow-lg transition-colors ${d?"bg-[#374151] hover:bg-[#404c5e] text-gray-100 border border-gray-600":"bg-white hover:bg-gray-50 border border-gray-200"}`,children:[V.jsx(Qe,{className:"size-5"}),V.jsx("span",{children:"Menu"})]})]})}export{on as AxialSymmetryConstruction};
