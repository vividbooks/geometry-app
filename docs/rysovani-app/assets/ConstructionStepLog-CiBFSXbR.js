import{j as e,A as j,a as v,r as d}from"./index-XwFAIRJN.js";import{R as N,Z as $,S as w,a as C,b as T,M as E,F as z,C as F,c as R,X as D}from"./slider-DIjnFkRt.js";function S({currentStep:a,totalSteps:n,showCaptions:h,darkMode:t,scale:l,onStepChange:p,onRestart:g,onToggleCaptions:y,onToggleDarkMode:o,onZoomChange:r}){const c=s=>{s>=0&&s<n&&p(s)};return e.jsxs("div",{className:`absolute left-1/2 -translate-x-1/2 z-10 flex items-center gap-3 px-6 py-4 rounded-2xl shadow-2xl ${t?"bg-gray-900 border border-gray-800":"bg-white"}`,style:{bottom:"calc(32px + env(safe-area-inset-bottom, 0px))",fontFamily:"var(--font-family, 'Fenomen Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif)"},children:[e.jsx("button",{onClick:g,onTouchEnd:s=>{s.preventDefault(),g()},className:`p-3 rounded-full transition-all ${t?"hover:bg-gray-800":"hover:bg-gray-100"}`,title:"Od začátku",children:e.jsx(N,{className:"size-6"})}),e.jsxs("button",{onClick:()=>c(a-1),onTouchEnd:s=>{s.preventDefault(),c(a-1)},disabled:a===0,className:`px-5 py-2.5 rounded-xl font-bold transition-all ${a===0?t?"bg-gray-800 text-gray-600 cursor-not-allowed":"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-400 text-white"}`,children:[e.jsx(j,{className:"size-5 inline mr-2"}),"Zpět"]}),e.jsxs("button",{onClick:()=>c(a+1),onTouchEnd:s=>{s.preventDefault(),c(a+1)},disabled:a>=n-1,className:`px-5 py-2.5 rounded-xl font-bold transition-all ${a>=n-1?t?"bg-gray-800 text-gray-600 cursor-not-allowed":"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-500 text-white"}`,children:["Další",e.jsx(v,{className:"size-5 inline ml-2"})]}),e.jsx("div",{className:`w-px h-8 ${t?"bg-gray-700":"bg-gray-300"}`}),e.jsx("button",{onClick:()=>r(Math.max(.2,l-.05)),onTouchEnd:s=>{s.preventDefault(),r(Math.max(.2,l-.05))},className:`p-1.5 rounded-lg transition-colors ${t?"hover:bg-gray-800 text-[#c0caf5]":"hover:bg-gray-100 text-gray-600"}`,title:"Oddálit",children:e.jsx($,{className:"size-5"})}),e.jsx("div",{className:"w-24 px-1",children:e.jsx(w,{value:[l*100],onValueChange:s=>r(s[0]/100),min:20,max:60,step:1})}),e.jsx("button",{onClick:()=>r(Math.min(.6,l+.05)),onTouchEnd:s=>{s.preventDefault(),r(Math.min(.6,l+.05))},className:`p-1.5 rounded-lg transition-colors ${t?"hover:bg-gray-800 text-[#c0caf5]":"hover:bg-gray-100 text-gray-600"}`,title:"Přiblížit",children:e.jsx(C,{className:"size-5"})}),e.jsx("div",{className:`w-px h-8 ${t?"bg-gray-700":"bg-gray-300"}`}),e.jsx("button",{onClick:o,onTouchEnd:s=>{s.preventDefault(),o()},className:`p-3 rounded-full transition-all ${t?"hover:bg-gray-800":"hover:bg-gray-100"}`,title:t?"Světlý režim":"Tmavý režim",children:t?e.jsx(T,{className:"size-6"}):e.jsx(E,{className:"size-6"})})]})}const m={point:"#3b82f6",segment:"#10b981",line:"#8b5cf6",circle:"#f43f5e",perpendicular:"#06b6d4",angle:"#f97316"},O={point:"•",segment:"—",line:"↔",circle:"○",perpendicular:"⊥",angle:"∠"};function _({steps:a,currentStep:n,constructionTitle:h,darkMode:t,visible:l,onClose:p}){const[g,y]=d.useState(!1),o=d.useRef(null);d.useEffect(()=>{if(o.current&&l){const s=o.current.querySelector(`[data-step="${n}"]`);s&&s.scrollIntoView({behavior:"smooth",block:"nearest"})}},[n,l]);const r=()=>{const s=a.map((x,b)=>`${b+1}. ${x.notation}`).join(`
`),i=`${h}

${s}`;navigator.clipboard.writeText(i).then(()=>{y(!0),setTimeout(()=>y(!1),2e3)})},c=a.length===1?"krok":a.length<5?"kroky":"kroků";return e.jsx("div",{className:`absolute top-0 right-0 h-full z-30 transition-transform duration-300 ease-out ${l?"translate-x-0":"translate-x-full"}`,style:{width:560},children:e.jsxs("div",{className:`h-full flex flex-col shadow-[-4px_0_24px_rgba(0,0,0,0.12)] ${t?"bg-[#1a1b26] border-l border-[#2a2b3d]":"bg-white border-l border-gray-200"}`,style:{fontFamily:"var(--font-family, 'Fenomen Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif)"},children:[e.jsxs("div",{className:`flex items-center justify-between px-6 py-5 border-b ${t?"border-[#2a2b3d]":"border-gray-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`flex items-center justify-center w-14 h-14 rounded-xl ${t?"bg-[#24283b]":"bg-gray-100"}`,children:e.jsx(z,{className:`w-7 h-7 ${t?"text-[#7aa2f7]":"text-gray-600"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-2xl font-semibold ${t?"text-[#c0caf5]":"text-gray-900"}`,children:"Zápis konstrukce"}),e.jsxs("p",{className:`text-base ${t?"text-[#565f89]":"text-gray-400"}`,children:[a.length," ",c]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:r,className:`p-3 rounded-lg transition-all ${t?"hover:bg-[#24283b] text-[#565f89] hover:text-[#c0caf5]":"hover:bg-gray-100 text-gray-400 hover:text-gray-600"}`,title:"Kopírovat zápis",children:g?e.jsx(F,{className:"w-7 h-7 text-emerald-500"}):e.jsx(R,{className:"w-7 h-7"})}),e.jsx("button",{onClick:p,className:`p-3 rounded-lg transition-all ${t?"hover:bg-[#24283b] text-[#565f89] hover:text-[#c0caf5]":"hover:bg-gray-100 text-gray-400 hover:text-gray-600"}`,title:"Zavřít",children:e.jsx(D,{className:"w-7 h-7"})})]})]}),e.jsx("div",{className:`px-6 py-4 border-b ${t?"border-[#2a2b3d] bg-[#24283b]/50":"border-gray-50 bg-gray-50/50"}`,children:e.jsx("p",{className:`text-xl font-medium ${t?"text-[#7aa2f7]":"text-indigo-600"}`,children:h})}),e.jsx("div",{ref:o,className:"flex-1 overflow-y-auto px-5 py-5",children:e.jsx("div",{className:"space-y-2",children:a.map((s,i)=>{const x=i===n,b=i<n,f=m[s.type],u=O[s.type];return e.jsxs("div",{"data-step":i,className:`flex items-start gap-3.5 px-5 py-4 rounded-xl transition-all duration-200 ${x?t?"bg-[#24283b]":"bg-blue-50/80":b?"":"opacity-40"}`,children:[e.jsxs("span",{className:`text-2xl min-w-[38px] text-right pt-0.5 tabular-nums font-medium ${x?t?"text-[#7aa2f7]":"text-blue-600":t?"text-[#565f89]":"text-gray-400"}`,children:[i+1,"."]}),e.jsx("span",{className:"pt-1 shrink-0 text-3xl font-bold",style:{color:f,minWidth:36,textAlign:"center"},children:u}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`text-2xl leading-relaxed font-medium ${x?t?"text-[#c0caf5]":"text-gray-900":b?t?"text-[#a9b1d6]":"text-gray-700":t?"text-[#565f89]":"text-gray-400"}`,style:{fontFamily:'"Times New Roman", "Computer Modern", Georgia, serif',fontStyle:"italic"},children:s.notation}),e.jsx("p",{className:`text-lg mt-1.5 ${t?"text-[#565f89]":"text-gray-400"}`,children:s.description})]})]},i)})})}),e.jsx("div",{className:`px-6 py-4 border-t ${t?"border-[#2a2b3d] text-[#565f89]":"border-gray-100 text-gray-400"}`,children:e.jsxs("div",{className:"flex items-center gap-4 text-base flex-wrap",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("span",{style:{color:m.point},children:"•"})," body"]}),e.jsx("span",{className:"opacity-40",children:"|"}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("span",{style:{color:m.segment},children:"—"})," úsečky"]}),e.jsx("span",{className:"opacity-40",children:"|"}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("span",{style:{color:m.circle},children:"○"})," kružnice"]}),e.jsx("span",{className:"opacity-40",children:"|"}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("span",{style:{color:m.line},children:"↔"})," přímky"]})]})})]})})}export{S as C,_ as a};
